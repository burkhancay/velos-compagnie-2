{"ast":null,"code":"import * as Realm from \"realm-web\";\nimport { app } from \"../../service/mongoDB-sdk\";\nimport { handleLogin, handleLogout, handleAuthenticationErrors } from \"../../state/actions/authentication\";\n\nconst useAuthentication = dispatch => {\n  function handleUserRegistration(newUser) {\n    return new Promise(resolve => {\n      app.emailPasswordAuth.registerUser(newUser.email, newUser.password).then(() => {\n        const credentials = Realm.Credentials.emailPassword(newUser.email, newUser.password);\n        app.logIn(credentials).then(user => {\n          resolve(user);\n          dispatch(handleLogin(newUser));\n        });\n      }).catch(err => dispatch(handleAuthenticationErrors(err)));\n    });\n  }\n\n  async function handleUserLogout() {\n    var _app$currentUser;\n\n    console.dir(app.currentUser);\n    (_app$currentUser = app.currentUser) === null || _app$currentUser === void 0 ? void 0 : _app$currentUser.logOut().then(() => {\n      console.log(\"user successfully log out\");\n    }).catch(err => console.log(err));\n  }\n\n  return {\n    handleUserRegistration\n  };\n};\n\nexport default useAuthentication;","map":{"version":3,"sources":["C:/Users/BRKHNCY/Desktop/velos/client/src/lib/hooks/useAuthentication/index.js"],"names":["Realm","app","handleLogin","handleLogout","handleAuthenticationErrors","useAuthentication","dispatch","handleUserRegistration","newUser","Promise","resolve","emailPasswordAuth","registerUser","email","password","then","credentials","Credentials","emailPassword","logIn","user","catch","err","handleUserLogout","console","dir","currentUser","logOut","log"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,WAAvB;AACA,SAASC,GAAT,QAAoB,2BAApB;AACA,SAASC,WAAT,EAAsBC,YAAtB,EAAoCC,0BAApC,QAAsE,oCAAtE;;AAGA,MAAMC,iBAAiB,GAAIC,QAAD,IAAc;AACpC,WAASC,sBAAT,CAAgCC,OAAhC,EAAwC;AACpC,WAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AAC5BT,MAAAA,GAAG,CAACU,iBAAJ,CACCC,YADD,CACcJ,OAAO,CAACK,KADtB,EAC6BL,OAAO,CAACM,QADrC,EAECC,IAFD,CAEM,MAAM;AACR,cAAMC,WAAW,GAAGhB,KAAK,CAACiB,WAAN,CAAkBC,aAAlB,CAAgCV,OAAO,CAACK,KAAxC,EAA+CL,OAAO,CAACM,QAAvD,CAApB;AACAb,QAAAA,GAAG,CAACkB,KAAJ,CAAUH,WAAV,EAAuBD,IAAvB,CAA6BK,IAAD,IAAU;AAClCV,UAAAA,OAAO,CAACU,IAAD,CAAP;AACAd,UAAAA,QAAQ,CAACJ,WAAW,CAACM,OAAD,CAAZ,CAAR;AACH,SAHD;AAIH,OARD,EASCa,KATD,CASQC,GAAD,IAAShB,QAAQ,CAACF,0BAA0B,CAACkB,GAAD,CAA3B,CATxB;AAUH,KAXM,CAAP;AAYH;;AACD,iBAAeC,gBAAf,GAAiC;AAAA;;AAC7BC,IAAAA,OAAO,CAACC,GAAR,CAAYxB,GAAG,CAACyB,WAAhB;AACA,wBAAAzB,GAAG,CAACyB,WAAJ,sEAAiBC,MAAjB,GACCZ,IADD,CACM,MAAM;AACRS,MAAAA,OAAO,CAACI,GAAR,CAAY,2BAAZ;AACH,KAHD,EAICP,KAJD,CAIQC,GAAD,IAASE,OAAO,CAACI,GAAR,CAAYN,GAAZ,CAJhB;AAKH;;AACD,SAAO;AACHf,IAAAA;AADG,GAAP;AAGH,CA1BD;;AA4BA,eAAeF,iBAAf","sourcesContent":["import * as Realm from \"realm-web\";\r\nimport { app } from \"../../service/mongoDB-sdk\";\r\nimport { handleLogin, handleLogout, handleAuthenticationErrors } from \"../../state/actions/authentication\";\r\n\r\n\r\nconst useAuthentication = (dispatch) => {\r\n    function handleUserRegistration(newUser){\r\n        return new Promise((resolve) => {\r\n            app.emailPasswordAuth\r\n            .registerUser(newUser.email, newUser.password)\r\n            .then(() => {\r\n                const credentials = Realm.Credentials.emailPassword(newUser.email, newUser.password);\r\n                app.logIn(credentials).then((user) => {\r\n                    resolve(user);\r\n                    dispatch(handleLogin(newUser));\r\n                });\r\n            })\r\n            .catch((err) => dispatch(handleAuthenticationErrors(err)));\r\n        });\r\n    }\r\n    async function handleUserLogout(){\r\n        console.dir(app.currentUser);\r\n        app.currentUser?.logOut()\r\n        .then(() => {\r\n            console.log(\"user successfully log out\");\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n    return {\r\n        handleUserRegistration\r\n    };\r\n};\r\n\r\nexport default useAuthentication;"]},"metadata":{},"sourceType":"module"}