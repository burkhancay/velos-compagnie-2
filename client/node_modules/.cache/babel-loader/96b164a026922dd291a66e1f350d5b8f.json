{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\BRKHNCY\\\\Desktop\\\\velos\\\\client\\\\src\\\\components\\\\Checkout\\\\Success.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { saveOrder } from \"../../lib/state/actions\";\nimport useAuthentication from \"../../lib/hooks/useAuthentication\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst styles = {\n  height: \"100vh\",\n  fontSize: 20\n};\n\nfunction Success({\n  history\n}) {\n  _s();\n\n  const {\n    items\n  } = useSelector(state => state.cart);\n  const dispatch = useDispatch();\n  const {\n    handleAuthentication\n  } = useAuthentication(dispatch);\n\n  const dispatchAndSaveOrder = user => {\n    return new Promise(resolve => {\n      const total = localStorage.getItem('total');\n      const order = {\n        user,\n        items,\n        total: Number(total)\n      };\n      dispatch(saveOrder(order));\n      resolve();\n    });\n  };\n\n  const clearStorage = () => {\n    return new Promise(resolve => {\n      localStorage.setItem(\"items\", []);\n      resolve();\n    });\n  };\n\n  const redirectHome = () => {\n    return new Promise(resolve => {\n      setTimeout(() => history.push(\"/\"), 4000);\n      resolve();\n    });\n  };\n\n  useEffect(() => {\n    (async () => {\n      const userProfile = await handleAuthentication();\n      await dispatchAndSaveOrder(userProfile);\n      await clearStorage();\n      await redirectHome();\n    })(); // IIFE\n\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles,\n      className: \"d-flex justify-content-center align-items-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-success mt-3 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"icontext\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"icon text-success fa fa-thumbs-up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this), \"Thank you for your order & your payment\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(Success, \"VojbCNoK2fFA/n34WrOUXs3RrTQ=\", false, function () {\n  return [useSelector, useDispatch, useAuthentication];\n});\n\n_c = Success;\nexport default Success;\n\nvar _c;\n\n$RefreshReg$(_c, \"Success\");","map":{"version":3,"sources":["C:/Users/BRKHNCY/Desktop/velos/client/src/components/Checkout/Success.js"],"names":["React","useEffect","useDispatch","useSelector","saveOrder","useAuthentication","styles","height","fontSize","Success","history","items","state","cart","dispatch","handleAuthentication","dispatchAndSaveOrder","user","Promise","resolve","total","localStorage","getItem","order","Number","clearStorage","setItem","redirectHome","setTimeout","push","userProfile"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,SAAT,QAA0B,yBAA1B;AACA,OAAOC,iBAAP,MAA8B,mCAA9B;;;AAEA,MAAMC,MAAM,GAAG;AACbC,EAAAA,MAAM,EAAE,OADK;AAEbC,EAAAA,QAAQ,EAAE;AAFG,CAAf;;AAIA,SAASC,OAAT,CAAiB;AAAEC,EAAAA;AAAF,CAAjB,EAA8B;AAAA;;AAC5B,QAAM;AAAEC,IAAAA;AAAF,MAAYR,WAAW,CAAES,KAAD,IAAWA,KAAK,CAACC,IAAlB,CAA7B;AACA,QAAMC,QAAQ,GAAGZ,WAAW,EAA5B;AACA,QAAM;AAAEa,IAAAA;AAAF,MAA2BV,iBAAiB,CAACS,QAAD,CAAlD;;AAEA,QAAME,oBAAoB,GAAIC,IAAD,IAAU;AACrC,WAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AAC9B,YAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,YAAMC,KAAK,GAAG;AAAEN,QAAAA,IAAF;AAAQN,QAAAA,KAAR;AAAeS,QAAAA,KAAK,EAAGI,MAAM,CAACJ,KAAD;AAA7B,OAAd;AACAN,MAAAA,QAAQ,CAACV,SAAS,CAACmB,KAAD,CAAV,CAAR;AACAJ,MAAAA,OAAO;AACR,KALM,CAAP;AAMD,GAPD;;AAQA,QAAMM,YAAY,GAAG,MAAM;AACzB,WAAO,IAAIP,OAAJ,CAAaC,OAAD,IAAa;AAC9BE,MAAAA,YAAY,CAACK,OAAb,CAAqB,OAArB,EAA8B,EAA9B;AACAP,MAAAA,OAAO;AACR,KAHM,CAAP;AAID,GALD;;AAMA,QAAMQ,YAAY,GAAG,MAAM;AACzB,WAAO,IAAIT,OAAJ,CAAaC,OAAD,IAAa;AAC9BS,MAAAA,UAAU,CAAC,MAAMlB,OAAO,CAACmB,IAAR,CAAa,GAAb,CAAP,EAA0B,IAA1B,CAAV;AACAV,MAAAA,OAAO;AACR,KAHM,CAAP;AAID,GALD;;AAOAlB,EAAAA,SAAS,CAAC,MAAM;AACd,KAAC,YAAY;AACX,YAAM6B,WAAW,GAAG,MAAMf,oBAAoB,EAA9C;AACA,YAAMC,oBAAoB,CAACc,WAAD,CAA1B;AACA,YAAML,YAAY,EAAlB;AACA,YAAME,YAAY,EAAlB;AACD,KALD,IADc,CAMR;;AACP,GAPQ,EAON,EAPM,CAAT;AASA,sBACE;AAAA,2BACE;AACE,MAAA,KAAK,EAAErB,MADT;AAEE,MAAA,SAAS,EAAC,kDAFZ;AAAA,6BAGE;AAAK,QAAA,SAAS,EAAC,+BAAf;AAAA,+BACE;AAAG,UAAA,SAAS,EAAC,UAAb;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,kBADF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAHF;AAAA;AAAA;AAAA;AAAA;AADF,mBADF;AAcD;;GAjDQG,O;UACWN,W,EACDD,W,EACgBG,iB;;;KAH1BI,O;AAkDT,eAAeA,OAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { saveOrder } from \"../../lib/state/actions\";\nimport useAuthentication from \"../../lib/hooks/useAuthentication\";\n\nconst styles = {\n  height: \"100vh\",\n  fontSize: 20,\n};\nfunction Success({ history }) {\n  const { items } = useSelector((state) => state.cart);\n  const dispatch = useDispatch();\n  const { handleAuthentication } = useAuthentication(dispatch);\n\n  const dispatchAndSaveOrder = (user) => {\n    return new Promise((resolve) => {\n      const total = localStorage.getItem('total')\n      const order = { user, items, total : Number(total) };\n      dispatch(saveOrder(order));\n      resolve();\n    });\n  };\n  const clearStorage = () => {\n    return new Promise((resolve) => {\n      localStorage.setItem(\"items\", []);\n      resolve();\n    });\n  };\n  const redirectHome = () => {\n    return new Promise((resolve) => {\n      setTimeout(() => history.push(\"/\"), 4000);\n      resolve();\n    });\n  };\n\n  useEffect(() => {\n    (async () => {\n      const userProfile = await handleAuthentication();\n      await dispatchAndSaveOrder(userProfile);\n      await clearStorage();\n      await redirectHome();\n    })(); // IIFE\n  }, []);\n\n  return (\n    <>\n      <div\n        style={styles}\n        className=\"d-flex justify-content-center align-items-center\">\n        <div className=\"alert alert-success mt-3 mb-3\">\n          <p className=\"icontext\">\n            <i className=\"icon text-success fa fa-thumbs-up\"></i>Thank you for\n            your order &amp; your payment\n          </p>\n        </div>\n      </div>\n    </>\n  );\n}\nexport default Success;\n"]},"metadata":{},"sourceType":"module"}